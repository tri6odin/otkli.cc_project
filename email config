apt-get purge sendmail*
apt install postfix

default install no config

sudo postconf -e "relayhost = [email-smtp.eu-central-1.amazonaws.com]:587" \
"smtp_sasl_auth_enable = yes" \
"smtp_sasl_security_options = noanonymous" \
"smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd" \
"smtp_use_tls = yes" \
"smtp_tls_security_level = encrypt" \
"smtp_tls_note_starttls_offer = yes"

In a text editor, open the file /etc/postfix/master.cf. Search for the following entry:

-o smtp_fallback_relay=
If you find this entry, comment it out by placing a # (hash) character at the beginning of the line. Save and close the file.
Otherwise, if this entry isn't present, continue to the next step.

In a text editor, open the file /etc/postfix/sasl_passwd. If the file doesn't already exist, create it.
Add the following line to /etc/postfix/sasl_passwd:

[email-smtp.eu-central-1.amazonaws.com]:587 AKIARI23VGNCQPP6SFPN:BCP6T0jknGe2txZFHRO39jYx2fnBmfo5u4QfwFuTe/4X

sudo postmap hash:/etc/postfix/sasl_passwd
sudo chown root:root /etc/postfix/sasl_passwd /etc/postfix/sasl_passwd.db
sudo chmod 0600 /etc/postfix/sasl_passwd /etc/postfix/sasl_passwd.db

sudo postconf -e 'smtp_tls_CAfile = /etc/ssl/certs/ca-certificates.crt'

sendmail -f send@otkli.cc tri6odin@gmail.com
From: Sender Name <send@otkli.cc>
Subject: Amazon SES Test                
This message was sent using Amazon SES.                
.
